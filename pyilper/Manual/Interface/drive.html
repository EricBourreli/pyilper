<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
  <title>Drive Tab</title>
</head>

<body bgcolor="#FFF677" link="#008F00">
  <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr bgcolor="#FFF000">
      <th valign="middle" align="left" width="1%"><a href=
      "../index.html"><img src=
      "../Images/hpil.png" alt="Home" border="0"></a></th>

      <td valign="middle" align="left" width="98%">
        <h1><a name="Top">Drive Tab</a></h1>
      </td>

      <td valign="middle" align="right" width="1%"><nobr><a href=
      "../index.html">pyILPER Manual</a> &#187; <a href=
      "index.html">User Interface</a></nobr></td>
    </tr>
  </table>

  <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
      <td valign="middle" align="left" width="99%">
        <h2>Description</h2>
        <p>This virtual device emulates either a HP82161A cassette drive, a
        HP9114B disk drive or a virtual HDRIVE1 device to access
        files on a LIF image file.</p>

        <p>The directory listing of the current LIF image file is displayed on the
        tab. The listing is updated if the drive has been idle for 3 seconds. 
        The column headers can be checked to get a sorted list of the directory.</p>

        <p>The virtual devices have the following HP-IL configuration:</p>

        <table border="1">
        <tr><th>Device</td><th>Accessory ID</th><th>Default Address</th><th>Device ID</th></tr>
        <tr><td>HP82161A</td><td>0x10</td><td>0x02</td><td>&nbsp;</td></tr>
        <tr><td>HP9114B</td><td>0x10</td><td>0x02</td><td>HP9114B</td></tr>
        <tr><td>HDRIVE1</td><td>0x10</td><td>0x02</td><td>HDRIVE1</td></tr>
        </table>

        <p>In most cases you should apply the HDRIVE1 drive type.
        Apply the HP9114B drive type if you use software that requires compatibility 
        with that device. Use the HP82161A drive type if the controller is a HP-41.</p>

        <p>The following LIF file layouts are supported:</p>
        <table border="1">
        <tr><th>Layout</th><th>Tracks</th><th>Sides</th><th>Sectors</th><th>Capacity</th></tr>
        <tr><td>128KB Cassette</td><td>2</td><td>1</td><td>256</td><td>131.072 Bytes</tr>
        <tr><td>616KB Disk</td><td>77</td><td>2</td><td>16</td><td>630.784 Bytes</tr>
        <tr><td>640 KB Disk</td><td>80</td><td>2</td><td>16</td><td>655.360 Bytes</tr>
        </table>

        <p>Note: the HP-41 can only access the first 130 bytes of
        larger disk media.</p>

        <p>The Lif file layouts are compatible with the following emulated drive
        types.</p>

        <table border ="1">
        <tr><td>&nbsp;</td><td>HP82161A</td><td>HP9114A</td><td>HDRIVE1</td></tr>
        <tr><td>128KB Cassette</td><td>+</td><td>-</td><td>+</td></tr>
        <tr><td>616KB Disk</td><td>-</td><td>+</td><td>+</td></tr>
        <tr><td>640KB Disk</td><td>-</td><td>-</td><td>+</td></tr>
        </table>

        <p>For the HDRIVE1 drive type there is experimental support for larger
        LIF image files (up to 16MB).</p>

        <p>Note: pyILPER requires a valid LIF header when mounting LIF 
        image files including:</p>
        <p>
        <ul>
        <li>The LIF identifier 0x800 at offset 0</li>
        <li>The media size information (number of tracks per surface,
        number of surfaces, number of blocks per track) starting at offset 24</li>
        </ul>
        <p>If you mount a LIF image file with incorrect header information you
        get a warning and the default medium size of the current drive type is
        used. Warning: in this case you must select the proper drive type.
        Otherwiese the image file may become corrupted.
        </p>
        <p>If a LIF image medium is initialized by a HP-41 HP-IL module or an early
        HP-71B HP-IL module pyILPER fixes wrong or missing header information.</p>
      </td>
    </tr>

    <tr>
      <td valign="middle" align="left" width="99%">
        <h2>Controls</h2>
       <p>The drive tab has the following controls:</p>
        <blockquote>
        <ul>
        <li>LIF image file button: Selects a disk file that contains the image
        of a LIF file. If a non existing file was specified the medium
        must be initialized by the controller. Note: the file is only
        opened by pyILPER during HP-IL read or write operations. The layout
        of the LIF image file must match the emulated drive type. See the
        compatibility information above.
        </li>

        <li>Drive active checkbox: If checked, the virtual HP-IL drive is
        available and can be used as HP-IL device. The HP-IL loop must
        always be reconfigured after this box has been checked or unchecked.
        </li>

        <li>Drive type combobox: Choose the proper drive type that shall be
        emulated (see above). The LIF image file must be reopened, after the 
        drive type has been changed.
        </li>
        </ul>
        </blockquote>

      </td>
    </tr>
    <tr>
      <td valign="middle" align="left" width="99%">
        <h2>LIF image file operations</h2>
        <p>The drive tab provides the following controls to perform
        certain tasks on the LIF image file:</p>
        <p>Tools drop down menu at the bottom of the tab:</p>
        <ul>
        <li>Pack the LIF image file (very fast!)</li>
        <li>Import a file from the local file system into the LIF image file</li>
        </ul>
        <p>File context menu (right mouse button click on selected file in the directory listing):</p>
        <ul>
        <li>Purge the selected file</li>
        <li>Rename the selected file</li>
        <li>Export the selected file to the local file system</li>
        </ul>
        <p>Requirements:</p>
        <ul>
        <li>The drive must be deactivated (drive active check box unchecked) in order
        to use these functions</li>
        <li>The <a href=https://github.com/bug400/lifutils/releases>LIFUTILS</a>
        must be installed. At least version 1.7.3 is recommended.</li>
      </td>
    </tr>

  </table><br>

  <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr bgcolor="#FFF000">
      <td valign="center" align="center"><a href=
      "scope.html"><font color=
      "#66A000"><b>Scope Tab</b></font></a> ::
      <a href="drive.html">Drive Tab</a> ::
       <a href="printer.html">Printer Tab</a> ::
       <a href="terminal.html">Terminal Tab</a></td>
    </tr>
  </table>
</body>
</html>

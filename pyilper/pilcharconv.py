#!/usr/bin/python3
# -*- coding: utf-8 -*-
# pilcharconv for Linux
#
# (c) 2015 Joachim Siebold
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
#
# character conversion ---------------------------------------
#
# Changelog
#
# 19.02.2016 jsi:
# - added stringconv function
# 16.09.2017 jsi:
# - HP Roman 8 character conversion code table implemented. Use control pictures for
#   C0 control codes.
# - renamed stringconv to barrrconv. Added stringconv.
# 27.12.2018 jsi
# - added HP2225 charset
#
CHARSET_HP71=0
CHARSET_HP41=1
CHARSET_ROMAN8=2
CHARSET_HP2225=3
#
# do not use the HP2555 character set in menus
#
charsets= [ "HP-71", "HP-41", "ROMAN-8"]

# dictionary hp-71 character set to unicode
hp71_unicode = {
  0 : ' ', 
  1 : '°', 
# 2 : '\u0304x',
  2 : 'x',
  3 : '\u2190' ,
  4 : '\u03B1' ,
  5 : '\u03B2' ,
  6 : '\u03B3' ,
  7 : '\u2618' , # bell!
  8 : chr(8),
  9 : '\u03A3' ,
  10 : chr(10),
  11 : '\u03BB' ,
  12 : '\u03Bc' ,
  13 : chr(13),
  14 : '\u03C4' ,
  15 : '\u03A6' ,
  16 : '\u03B8' ,
  17 : '\u03A9' ,
  18 : '\u03B4' ,
  19 : '\u03B5' ,
  20 : '\u03C0',
  21 : 'Ä' ,
  22 : 'ä' ,
  23 : 'Ö' ,
  24 : 'ö' ,
  25 : 'Ü' ,
  26 : 'ü',
  27 : chr(27),
  28 : '\u03A3' ,
  29 : '\u2260' ,
  30 : '£',
  31 : '\u25AF' ,
  32 : ' ' ,
  33 : '!' ,
  34 : '"' ,
  35 : '#' ,
  36 : '$' ,
  37 : '%' ,
  38 : '&' ,
  39 : '\'' ,
  40 : '(' ,
  41 : ')' ,
  42 : '*' ,
  43 : '+' ,
  44 : ',' ,
  45 : '-' ,
  46 : '.' ,
  47 : '/' ,
  48 : '0' ,
  49 : '1' ,
  50 : '2' ,
  51 : '3' ,
  52 : '4' ,
  53 : '5' ,
  54 : '6' ,
  55 : '7' ,
  56 : '8' ,
  57 : '9' ,
  58 : ':' ,
  59 : ';' ,
  60 : '<' ,
  61 : '=' ,
  62 : '>' ,
  63 : '?' ,
  64 : '@' ,
  65 : 'A' ,
  66 : 'B' ,
  67 : 'C' ,
  68 : 'D' ,
  69 : 'E' ,
  70 : 'F' ,
  71 : 'G' ,
  72 : 'H' ,
  73 : 'I' ,
  74 : 'J' ,
  75 : 'K' ,
  76 : 'L' ,
  77 : 'M' ,
  78 : 'N' ,
  79 : 'O' ,
  80 : 'P' ,
  81 : 'Q' ,
  82 : 'R' ,
  83 : 'S' ,
  84 : 'T' ,
  85 : 'U' ,
  86 : 'V' ,
  87 : 'W' ,
  88 : 'X' ,
  89 : 'Y' ,
  90 : 'Z' ,
  91 : '[' ,
  92 : '\\' ,
  93 : ']' ,
  94 : '^' ,
  95 : '_' ,
  96 : '\\' ,
  97 : 'a' ,
  98 : 'b' ,
  99 : 'c' ,
  100 : 'd' ,
  101 : 'e' ,
  102 : 'f' ,
  103 : 'g' ,
  104 : 'h' ,
  105 : 'i' ,
  106 : 'j' ,
  107 : 'k' ,
  108 : 'l' ,
  109 : 'm' ,
  110 : 'n' ,
  111 : 'o' ,
  112 : 'p' ,
  113 : 'q' ,
  114 : 'r' ,
  115 : 's' ,
  116 : 't' ,
  117 : 'u' ,
  118 : 'v' ,
  119 : 'w' ,
  120 : 'x' ,
  121 : 'y' ,
  122 : 'z' ,
  123 : '{' ,
  124 : '|' ,
  125 : '}' ,
  126 : '~' ,
  127 : '\u251C' ,
  128 : ' ', 
  129 : '°', 
# 130 : '\u0304x',
  130 : 'x',
  131 : '\u2190' ,
  132 : '\u03B1' ,
  133 : '\u03B2' ,
  134 : '\u03B3' ,
  135 : '\u2618' ,
  136 : '\u25AF' ,
  137 : '\u03A3' ,
  138 : '\u25AF' ,
  139 : '\u03BB' ,
  140 : '\u03Bc' ,
  141 : '\u25AF' ,
  142 : '\u03C4' ,
  143 : '\u03A6' ,
  144 : '\u03B8' ,
  145 : '\u03A9' ,
  146 : '\u03B4' ,
  147 : '\u03B5' ,
  148 : '\u03C0',
  149 : 'Ä' ,
  150 : 'ä' ,
  151 : 'Ö' ,
  152 : 'ö' ,
  153 : 'Ü' ,
  154 : 'ü',
  155 : '\u25AF' ,
  156 : '\u03A3' ,
  157 : '\u2260' ,
  158 : '£',
  159 : '\u25AF' ,
  160 : ' ' ,
  161 : '!' ,
  162 : '"' ,
  163 : '#' ,
  164 : '$' ,
  165 : '%' ,
  166 : '&' ,
  167 : '\\' ,
  168 : '(' ,
  169 : ')' ,
  170 : '*' ,
  171 : '+' ,
  172 : ',' ,
  173 : '-' ,
  174 : '.' ,
  175 : '/' ,
  176 : '0' ,
  177 : '1' ,
  178 : '2' ,
  179 : '3' ,
  180 : '4' ,
  181 : '5' ,
  182 : '6' ,
  183 : '7' ,
  184 : '8' ,
  185 : '9' ,
  186 : ':' ,
  187 : ';' ,
  188 : '<' ,
  189 : '=' ,
  190 : '>' ,
  191 : '?' ,
  192 : '@' ,
  193 : 'A' ,
  194 : 'B' ,
  195 : 'C' ,
  196 : 'D' ,
  197 : 'E' ,
  198 : 'F' ,
  199 : 'G' ,
  200 : 'H' ,
  201 : 'I' ,
  202 : 'J' ,
  203 : 'K' ,
  204 : 'L' ,
  205 : 'M' ,
  206 : 'N' ,
  207 : 'O' ,
  208 : 'P' ,
  209 : 'Q' ,
  210 : 'R' ,
  211 : 'S' ,
  212 : 'T' ,
  213 : 'U' ,
  214 : 'V' ,
  215 : 'W' ,
  216 : 'X' ,
  217 : 'Y' ,
  218 : 'Z' ,
  219 : '[' ,
  220 : '\\' ,
  221 : ']' ,
  222 : '^' ,
  223 : '_' ,
  224 : '\'' ,
  225 : 'a' ,
  226 : 'b' ,
  227 : 'c' ,
  228 : 'd' ,
  229 : 'e' ,
  230 : 'f' ,
  231 : 'g' ,
  232 : 'h' ,
  233 : 'i' ,
  234 : 'j' ,
  235 : 'k' ,
  236 : 'l' ,
  237 : 'm' ,
  238 : 'n' ,
  239 : 'o' ,
  240 : 'p' ,
  241 : 'q' ,
  242 : 'r' ,
  243 : 's' ,
  244 : 't' ,
  245 : 'u' ,
  246 : 'v' ,
  247 : 'w' ,
  248 : 'x' ,
  249 : 'y' ,
  250 : 'z' ,
  251 : '{' ,
  252 : '|' ,
  253 : '}' ,
  254 : '~' ,
  255 : '\u251C' ,
} 

hp41_unicode = {
  0 : '\u25C6', 
  1 : '\u03F0', 
# 2 : '\u0304x',
  2 : 'x',
  3 : '\u2190' ,
  4 : '\u03B1' ,
  5 : '\u03B2' ,
  6 : '\u03B3' ,
  7 : '\u2193' , 
  8 : '\u03B4',
  9 : '\u03A3' ,
  10 : chr(10),
  11 : '\u03BB' ,
  12 : '\u03Bc' ,
  13 : chr(13),
  14 : '\u03C4' ,
  15 : '\u03A6' ,
  16 : '\u03B8' ,
  17 : '\u03A9' ,
  18 : '\u03B4' ,
  19 : '\u00C5' ,
  20 : '\u00E5',
  21 : 'Ä' ,
  22 : 'ä' ,
  23 : 'Ö' ,
  24 : 'ö' ,
  25 : 'Ü' ,
  26 : 'ü',
  27 : '\u00C6',
  28 : '\u00E6' ,
  29 : '\u2260' ,
  30 : '£',
  31 : '\u25AF' ,
  32 : ' ' ,
  33 : '!' ,
  34 : '"' ,
  35 : '#' ,
  36 : '$' ,
  37 : '%' ,
  38 : '&' ,
  39 : '\'' ,
  40 : '(' ,
  41 : ')' ,
  42 : '*' ,
  43 : '+' ,
  44 : ',' ,
  45 : '-' ,
  46 : '.' ,
  47 : '/' ,
  48 : '0' ,
  49 : '1' ,
  50 : '2' ,
  51 : '3' ,
  52 : '4' ,
  53 : '5' ,
  54 : '6' ,
  55 : '7' ,
  56 : '8' ,
  57 : '9' ,
  58 : ':' ,
  59 : ';' ,
  60 : '<' ,
  61 : '=' ,
  62 : '>' ,
  63 : '?' ,
  64 : '@' ,
  65 : 'A' ,
  66 : 'B' ,
  67 : 'C' ,
  68 : 'D' ,
  69 : 'E' ,
  70 : 'F' ,
  71 : 'G' ,
  72 : 'H' ,
  73 : 'I' ,
  74 : 'J' ,
  75 : 'K' ,
  76 : 'L' ,
  77 : 'M' ,
  78 : 'N' ,
  79 : 'O' ,
  80 : 'P' ,
  81 : 'Q' ,
  82 : 'R' ,
  83 : 'S' ,
  84 : 'T' ,
  85 : 'U' ,
  86 : 'V' ,
  87 : 'W' ,
  88 : 'X' ,
  89 : 'Y' ,
  90 : 'Z' ,
  91 : '[' ,
  92 : '\\' ,
  93 : ']' ,
  94 : '\u2191' ,
  95 : '_' ,
  96 : '\\' ,
  97 : 'a' ,
  98 : 'b' ,
  99 : 'c' ,
  100 : 'd' ,
  101 : 'e' ,
  102 : 'f' ,
  103 : 'g' ,
  104 : 'h' ,
  105 : 'i' ,
  106 : 'j' ,
  107 : 'k' ,
  108 : 'l' ,
  109 : 'm' ,
  110 : 'n' ,
  111 : 'o' ,
  112 : 'p' ,
  113 : 'q' ,
  114 : 'r' ,
  115 : 's' ,
  116 : 't' ,
  117 : 'u' ,
  118 : 'v' ,
  119 : 'w' ,
  120 : 'x' ,
  121 : 'y' ,
  122 : 'z' ,
  123 : '\u03C0' ,
  124 : '\u2280' , 
  125 : '\u2190' , 
  126 : '\u03A3' , 
  127 : '\u251C' ,
  128 : '\u25C6', 
  129 : '\u03F0', 
# 130 : '\u0304x',
  130 : 'x',
  131 : '\u2190' ,
  132 : '\u03B1' ,
  133 : '\u03B2' ,
  134 : '\u03B3' ,
  135 : '\u2193' , 
  136 : '\u03B4',
  137 : '\u03A3' ,
  138 : chr(10),
  139 : '\u03BB' ,
  140 : '\u03Bc' ,
  141 : chr(13),
  142 : '\u03C4' ,
  143 : '\u03A6' ,
  144 : '\u03B8' ,
  145 : '\u03A9' ,
  146 : '\u03B4' ,
  147 : '\u00C5' ,
  148 : '\u00E5',
  149 : 'Ä' ,
  150 : 'ä' ,
  151 : 'Ö' ,
  152 : 'ö' ,
  153 : 'Ü' ,
  154 : 'ü',
  155 : '\u00C6',
  156 : '\u00E6' ,
  157 : '\u2260' ,
  158 : '£',
  159 : '\u25AF' ,
  160 : ' ' ,
  161 : '!' ,
  162 : '"' ,
  163 : '#' ,
  164 : '$' ,
  165 : '%' ,
  166 : '&' ,
  167 : '\\' ,
  168 : '(' ,
  169 : ')' ,
  170 : '*' ,
  171 : '+' ,
  172 : ',' ,
  173 : '-' ,
  174 : '.' ,
  175 : '/' ,
  176 : '0' ,
  177 : '1' ,
  178 : '2' ,
  179 : '3' ,
  180 : '4' ,
  181 : '5' ,
  182 : '6' ,
  183 : '7' ,
  184 : '8' ,
  185 : '9' ,
  186 : ':' ,
  187 : ';' ,
  188 : '<' ,
  189 : '=' ,
  190 : '>' ,
  191 : '?' ,
  192 : '@' ,
  193 : 'A' ,
  194 : 'B' ,
  195 : 'C' ,
  196 : 'D' ,
  197 : 'E' ,
  198 : 'F' ,
  199 : 'G' ,
  200 : 'H' ,
  201 : 'I' ,
  202 : 'J' ,
  203 : 'K' ,
  204 : 'L' ,
  205 : 'M' ,
  206 : 'N' ,
  207 : 'O' ,
  208 : 'P' ,
  209 : 'Q' ,
  210 : 'R' ,
  211 : 'S' ,
  212 : 'T' ,
  213 : 'U' ,
  214 : 'V' ,
  215 : 'W' ,
  216 : 'X' ,
  217 : 'Y' ,
  218 : 'Z' ,
  219 : '[' ,
  220 : '\\' ,
  221 : ']' ,
  222 : '^' ,
  223 : '_' ,
  224 : '\'' ,
  225 : 'a' ,
  226 : 'b' ,
  227 : 'c' ,
  228 : 'd' ,
  229 : 'e' ,
  230 : 'f' ,
  231 : 'g' ,
  232 : 'h' ,
  233 : 'i' ,
  234 : 'j' ,
  235 : 'k' ,
  236 : 'l' ,
  237 : 'm' ,
  238 : 'n' ,
  239 : 'o' ,
  240 : 'p' ,
  241 : 'q' ,
  242 : 'r' ,
  243 : 's' ,
  244 : 't' ,
  245 : 'u' ,
  246 : 'v' ,
  247 : 'w' ,
  248 : 'x' ,
  249 : 'y' ,
  250 : 'z' ,
  251 : '{' ,
  252 : '|' ,
  253 : '}' ,
  254 : '~' ,
  255 : '\u251C' 
} 

roman8_unicode = {
  0 : '\u2400', 
  1 : '\u2401', 
  2 : '\u2402',
  3 : '\u2403',
  4 : '\u2404',
  5 : '\u2405',
  6 : '\u2406',
  7 : '\u2407', 
  8 : chr(8),    # BS
  9 : '\u2409',
  10 : chr(10),  # LF
  11 : '\u240B',
  12 : '\u240C',
  13 : chr(13),  # CR
  14 : '\u240E' ,
  15 : '\u240F' ,
  16 : '\u2410' ,
  17 : '\u2411' ,
  18 : '\u2412' ,
  19 : '\u2413' ,
  20 : '\u2414',
  21 : '\u2415' ,
  22 : '\u2416' ,
  23 : '\u2417' ,
  24 : '\u2418' ,
  25 : '\u2419' ,
  26 : '\u241A',
  27 : '\u241B',
  28 : '\u241C' ,
  29 : '\u241D' ,
  30 : '\u241E',
  31 : '\u241F' ,
  32 : ' ' ,
  33 : '!' ,
  34 : '"' ,
  35 : '#' ,
  36 : '$' ,
  37 : '%' ,
  38 : '&' ,
  39 : '\'' ,
  40 : '(' ,
  41 : ')' ,
  42 : '*' ,
  43 : '+' ,
  44 : ',' ,
  45 : '-' ,
  46 : '.' ,
  47 : '/' ,
  48 : '0' ,
  49 : '1' ,
  50 : '2' ,
  51 : '3' ,
  52 : '4' ,
  53 : '5' ,
  54 : '6' ,
  55 : '7' ,
  56 : '8' ,
  57 : '9' ,
  58 : ':' ,
  59 : ';' ,
  60 : '<' ,
  61 : '=' ,
  62 : '>' ,
  63 : '?' ,
  64 : '@' ,
  65 : 'A' ,
  66 : 'B' ,
  67 : 'C' ,
  68 : 'D' ,
  69 : 'E' ,
  70 : 'F' ,
  71 : 'G' ,
  72 : 'H' ,
  73 : 'I' ,
  74 : 'J' ,
  75 : 'K' ,
  76 : 'L' ,
  77 : 'M' ,
  78 : 'N' ,
  79 : 'O' ,
  80 : 'P' ,
  81 : 'Q' ,
  82 : 'R' ,
  83 : 'S' ,
  84 : 'T' ,
  85 : 'U' ,
  86 : 'V' ,
  87 : 'W' ,
  88 : 'X' ,
  89 : 'Y' ,
  90 : 'Z' ,
  91 : '[' ,
  92 : '\\' ,
  93 : ']' ,
  94 : '^' ,
  95 : '_' ,
  96 : '`' ,
  97 : 'a' ,
  98 : 'b' ,
  99 : 'c' ,
  100 : 'd' ,
  101 : 'e' ,
  102 : 'f' ,
  103 : 'g' ,
  104 : 'h' ,
  105 : 'i' ,
  106 : 'j' ,
  107 : 'k' ,
  108 : 'l' ,
  109 : 'm' ,
  110 : 'n' ,
  111 : 'o' ,
  112 : 'p' ,
  113 : 'q' ,
  114 : 'r' ,
  115 : 's' ,
  116 : 't' ,
  117 : 'u' ,
  118 : 'v' ,
  119 : 'w' ,
  120 : 'x' ,
  121 : 'y' ,
  122 : 'z' ,
  123 : '{' ,
  124 : '|' , 
  125 : '}' , 
  126 : '~' , 
  127 : chr(127) , # DEL
  128 : '\u2426',  # undefined
  129 : '\u2426',  # undefined
  130 : '\u2426',
  131 : '\u2426' ,
  132 : '\u2426' ,
  133 : '\u2426' ,
  134 : '\u2426' ,
  135 : '\u2426' , 
  136 : '\u2426',
  137 : '\u2426' ,
  138 : '\u2426',
  139 : '\u2426' ,
  140 : '\u2426' ,
  141 : '\u2426',
  142 : '\u2426' ,
  143 : '\u2426' ,
  144 : '\u2426' ,
  145 : '\u2426' ,
  146 : '\u2426' ,
  147 : '\u2426' ,
  148 : '\u2426',
  149 : '\u2426' ,
  150 : '\u2426' ,
  151 : '\u2426' ,
  152 : '\u2426' ,
  153 : '\u2426' ,
  154 : '\u2426' ,
  155 : '\u2426' ,
  156 : '\u2426' ,
  157 : '\u2426' ,
  158 : '\u2426' ,
  159 : '\u2426' ,
  160 : '\u2423' , # NBSP
  161 : '\u00C0' ,
  162 : '\u00C2' ,
  163 : '\u00C8' ,
  164 : '\u00CA' ,
  165 : '\u00CB' ,
  166 : '\u00CE' ,
  167 : '\u00CF' ,
  168 : '\u00B4' ,
  169 : '\u0060' ,
  170 : '\u02C6' ,
  171 : '\u00A8' ,
  172 : '\u02DC' ,
  173 : '\u00D9' ,
  174 : '\u00DB' ,
  175 : '\u20A4' ,
  176 : '\u203E' ,
  177 : '\u00DD' ,
  178 : '\u00FD' ,
  179 : '\u02DA' ,
  180 : '\u00C7' ,
  181 : '\u00E7' ,
  182 : '\u00D1' ,
  183 : '\u00F1' ,
  184 : '\u00A1' ,
  185 : '\u00BF' ,
  186 : '\u00A4' ,
  187 : '\u00A3' ,
  188 : '\u00A5' ,
  189 : '\u00A7' ,
  190 : '\u0192' ,
  191 : '\u00A2' ,
  192 : '\u00E2' ,
  193 : '\u00EA' ,
  194 : '\u00F4' ,
  195 : '\u00FB' ,
  196 : '\u00E1' ,
  197 : '\u00E9' ,
  198 : '\u00F3' ,
  199 : '\u00FA' ,
  200 : '\u00E0' ,
  201 : '\u00E8' ,
  202 : '\u00F2' ,
  203 : '\u00F9' ,
  204 : '\u00E4' ,
  205 : '\u00EB' ,
  206 : '\u00F6' ,
  207 : '\u00FC' ,
  208 : '\u00C5' ,
  209 : '\u00EE' ,
  210 : '\u00D8' ,
  211 : '\u00C6' ,
  212 : '\u00E5' ,
  213 : '\u00ED' ,
  214 : '\u00F8' ,
  215 : '\u00E6' ,
  216 : '\u00C4' ,
  217 : '\u00EC' ,
  218 : '\u00D6' ,
  219 : '\u00DC' ,
  220 : '\u00C9' ,
  221 : '\u00EF' ,
  222 : '\u00DF' ,
  223 : '\u00D4' ,
  224 : '\u00C1' ,
  225 : '\u00C3' ,
  226 : '\u00E3' ,
  227 : '\u00D0' ,
  228 : '\u00F0' ,
  229 : '\u00CD' ,
  230 : '\u00CC' ,
  231 : '\u00D3' ,
  232 : '\u00D2' ,
  233 : '\u00D5' ,
  234 : '\u00F5' ,
  235 : '\u0160' ,
  236 : '\u0161' ,
  237 : '\u00DA' ,
  238 : '\u0178' ,
  239 : '\u00FF' ,
  240 : '\u00DE' ,
  241 : '\u00FE' ,
  242 : '\u00B7' ,
  243 : '\u00B5' ,
  244 : '\u00B6' ,
  245 : '\u00BE' ,
  246 : '\u002D' ,
  247 : '\u00BC' ,
  248 : '\u00BD' ,
  249 : '\u00AA' ,
  250 : '\u00BA' ,
  251 : '\u00AB' ,
  252 : '\u25A0' ,
  253 : '\u00BB' ,
  254 : '\u00B1' ,
  255 : '\u2426' ,
}
#
# HP 2225 character set. Differences to the roman8 character set above:
# - bs, cr, lf and del are printable unicode symbols
# - character 0x80-0x9f are the same as 0x00-0x1f
#
hp2225_unicode = {
  0 : '\u2400', 
  1 : '\u2401', 
  2 : '\u2402',
  3 : '\u2403',
  4 : '\u2404',
  5 : '\u2405',
  6 : '\u2406',
  7 : '\u2407', 
  8 : '\u2408',
  9 : '\u2409',
  10 : '\u240A',
  11 : '\u240B',
  12 : '\u240C',
  13 : '\u240D',
  14 : '\u240E' ,
  15 : '\u240F' ,
  16 : '\u2410' ,
  17 : '\u2411' ,
  18 : '\u2412' ,
  19 : '\u2413' ,
  20 : '\u2414',
  21 : '\u2415' ,
  22 : '\u2416' ,
  23 : '\u2417' ,
  24 : '\u2418' ,
  25 : '\u2419' ,
  26 : '\u241A',
  27 : '\u241B',
  28 : '\u241C' ,
  29 : '\u241D' ,
  30 : '\u241E',
  31 : '\u241F' ,
  32 : ' ' ,
  33 : '!' ,
  34 : '"' ,
  35 : '#' ,
  36 : '$' ,
  37 : '%' ,
  38 : '&' ,
  39 : '\'' ,
  40 : '(' ,
  41 : ')' ,
  42 : '*' ,
  43 : '+' ,
  44 : ',' ,
  45 : '-' ,
  46 : '.' ,
  47 : '/' ,
  48 : '0' ,
  49 : '1' ,
  50 : '2' ,
  51 : '3' ,
  52 : '4' ,
  53 : '5' ,
  54 : '6' ,
  55 : '7' ,
  56 : '8' ,
  57 : '9' ,
  58 : ':' ,
  59 : ';' ,
  60 : '<' ,
  61 : '=' ,
  62 : '>' ,
  63 : '?' ,
  64 : '@' ,
  65 : 'A' ,
  66 : 'B' ,
  67 : 'C' ,
  68 : 'D' ,
  69 : 'E' ,
  70 : 'F' ,
  71 : 'G' ,
  72 : 'H' ,
  73 : 'I' ,
  74 : 'J' ,
  75 : 'K' ,
  76 : 'L' ,
  77 : 'M' ,
  78 : 'N' ,
  79 : 'O' ,
  80 : 'P' ,
  81 : 'Q' ,
  82 : 'R' ,
  83 : 'S' ,
  84 : 'T' ,
  85 : 'U' ,
  86 : 'V' ,
  87 : 'W' ,
  88 : 'X' ,
  89 : 'Y' ,
  90 : 'Z' ,
  91 : '[' ,
  92 : '\\' ,
  93 : ']' ,
  94 : '^' ,
  95 : '_' ,
  96 : '`' ,
  97 : 'a' ,
  98 : 'b' ,
  99 : 'c' ,
  100 : 'd' ,
  101 : 'e' ,
  102 : 'f' ,
  103 : 'g' ,
  104 : 'h' ,
  105 : 'i' ,
  106 : 'j' ,
  107 : 'k' ,
  108 : 'l' ,
  109 : 'm' ,
  110 : 'n' ,
  111 : 'o' ,
  112 : 'p' ,
  113 : 'q' ,
  114 : 'r' ,
  115 : 's' ,
  116 : 't' ,
  117 : 'u' ,
  118 : 'v' ,
  119 : 'w' ,
  120 : 'x' ,
  121 : 'y' ,
  122 : 'z' ,
  123 : '{' ,
  124 : '|' , 
  125 : '}' , 
  126 : '~' , 
  127 : '\u2421',
  128 : '\u2400', 
  129 : '\u2401', 
  130 : '\u2402',
  131 : '\u2403',
  132 : '\u2404',
  133 : '\u2405',
  134 : '\u2406',
  135 : '\u2407', 
  136 : '\u2408',
  137 : '\u2409',
  138 : '\u240A',
  139 : '\u240B',
  140 : '\u240C',
  141 : '\u240D',
  142 : '\u240E' ,
  143 : '\u240F' ,
  144 : '\u2410' ,
  145 : '\u2411' ,
  146 : '\u2412' ,
  147 : '\u2413' ,
  148 : '\u2414',
  149 : '\u2415' ,
  150 : '\u2416' ,
  151 : '\u2417' ,
  152 : '\u2418' ,
  153 : '\u2419' ,
  154 : '\u241A',
  155 : '\u241B',
  156 : '\u241C' ,
  157 : '\u241D' ,
  158 : '\u241E',
  159 : '\u241F' ,
  160 : '\u2423' , # NBSP
  161 : '\u00C0' ,
  162 : '\u00C2' ,
  163 : '\u00C8' ,
  164 : '\u00CA' ,
  165 : '\u00CB' ,
  166 : '\u00CE' ,
  167 : '\u00CF' ,
  168 : '\u00B4' ,
  169 : '\u0060' ,
  170 : '\u02C6' ,
  171 : '\u00A8' ,
  172 : '\u02DC' ,
  173 : '\u00D9' ,
  174 : '\u00DB' ,
  175 : '\u20A4' ,
  176 : '\u203E' ,
  177 : '\u00DD' ,
  178 : '\u00FD' ,
  179 : '\u02DA' ,
  180 : '\u00C7' ,
  181 : '\u00E7' ,
  182 : '\u00D1' ,
  183 : '\u00F1' ,
  184 : '\u00A1' ,
  185 : '\u00BF' ,
  186 : '\u00A4' ,
  187 : '\u00A3' ,
  188 : '\u00A5' ,
  189 : '\u00A7' ,
  190 : '\u0192' ,
  191 : '\u00A2' ,
  192 : '\u00E2' ,
  193 : '\u00EA' ,
  194 : '\u00F4' ,
  195 : '\u00FB' ,
  196 : '\u00E1' ,
  197 : '\u00E9' ,
  198 : '\u00F3' ,
  199 : '\u00FA' ,
  200 : '\u00E0' ,
  201 : '\u00E8' ,
  202 : '\u00F2' ,
  203 : '\u00F9' ,
  204 : '\u00E4' ,
  205 : '\u00EB' ,
  206 : '\u00F6' ,
  207 : '\u00FC' ,
  208 : '\u00C5' ,
  209 : '\u00EE' ,
  210 : '\u00D8' ,
  211 : '\u00C6' ,
  212 : '\u00E5' ,
  213 : '\u00ED' ,
  214 : '\u00F8' ,
  215 : '\u00E6' ,
  216 : '\u00C4' ,
  217 : '\u00EC' ,
  218 : '\u00D6' ,
  219 : '\u00DC' ,
  220 : '\u00C9' ,
  221 : '\u00EF' ,
  222 : '\u00DF' ,
  223 : '\u00D4' ,
  224 : '\u00C1' ,
  225 : '\u00C3' ,
  226 : '\u00E3' ,
  227 : '\u00D0' ,
  228 : '\u00F0' ,
  229 : '\u00CD' ,
  230 : '\u00CC' ,
  231 : '\u00D3' ,
  232 : '\u00D2' ,
  233 : '\u00D5' ,
  234 : '\u00F5' ,
  235 : '\u0160' ,
  236 : '\u0161' ,
  237 : '\u00DA' ,
  238 : '\u0178' ,
  239 : '\u00FF' ,
  240 : '\u00DE' ,
  241 : '\u00FE' ,
  242 : '\u00B7' ,
  243 : '\u00B5' ,
  244 : '\u00B6' ,
  245 : '\u00BE' ,
  246 : '\u002D' ,
  247 : '\u00BC' ,
  248 : '\u00BD' ,
  249 : '\u00AA' ,
  250 : '\u00BA' ,
  251 : '\u00AB' ,
  252 : '\u25A0' ,
  253 : '\u00BB' ,
  254 : '\u00B1' ,
  255 : '\u2426' ,
}
#
# convert single character
#
def charconv(s, charset):
   if charset== CHARSET_HP71:
      return(hp71_unicode[ord(s)])
   elif charset== CHARSET_HP41:
      return(hp41_unicode[ord(s)])
   elif charset == CHARSET_ROMAN8:
      return(roman8_unicode[ord(s)])
   elif charset == CHARSET_HP2225:
      return(hp2225_unicode[ord(s)])

#
# convert a bytearray to a string
#
def barrconv(barr, charset):
   slist= []
   for c in barr:
      if charset== CHARSET_HP71:
         slist.append(hp71_unicode[c])
      elif charset== CHARSET_HP41:
         slist.append(hp41_unicode[c])
      elif charset == CHARSET_ROMAN8:
         slist.append(roman8_unicode[c])
      elif charset == CHARSET_HP2225:
         slist.append(hp2225_unicode[c])
   return "".join(slist)
#
# convert a string
#
def stringconv(string, charset):
   slist= []
   for c in string:
      i=ord(c)
      if charset== CHARSET_HP71:
         slist.append(hp71_unicode[i])
      elif charset== CHARSET_HP41:
         slist.append(hp41_unicode[i])
      elif charset == CHARSET_ROMAN8:
         slist.append(roman8_unicode[i])
      elif charset == CHARSET_HP2225:
         slist.append(hp2225_unicode[i])
   return "".join(slist)

